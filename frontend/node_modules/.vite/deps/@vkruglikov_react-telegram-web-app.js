import {
  require_react
} from "./chunk-WQMOH32Y.js";
import {
  __toESM
} from "./chunk-5WWUZCGV.js";

// node_modules/@vkruglikov/react-telegram-web-app/lib/react-telegram-web-app.modern.js
var import_react = __toESM(require_react());
var s;
var a = "undefined" != typeof window && null != (s = window) && null != (s = s.Telegram) && s.WebApp ? window.Telegram.WebApp : null;
var c = (0, import_react.createContext)(a);
var d = { smoothButtonsTransition: false, smoothButtonsTransitionMs: 10 };
var m = (0, import_react.createContext)(d);
var v = () => ({ MainButton: { current: null }, BackButton: { current: null } });
var h = (0, import_react.createContext)({ MainButton: { current: null }, BackButton: { current: null } });
var p = () => {
};
var w = ({ id: n2, show: e2 = p, hide: l2 = p, currentShowedIdRef: r2 }) => {
  const { smoothButtonsTransition: u2, smoothButtonsTransitionMs: i2 } = (0, import_react.useContext)(m);
  (0, import_react.useEffect)(() => (e2(), r2.current = n2, () => {
    u2 ? (r2.current = null, setTimeout(() => {
      r2.current || l2();
    }, i2)) : (l2(), r2.current = null);
  }), [l2, n2, r2, e2, u2, i2]);
};
var f = () => (0, import_react.useContext)(c);
var P = ({ text: n2 = "CONTINUE", progress: e2 = false, disable: r2, disabled: u2 = false, color: i2, textColor: s2, onClick: a2 }) => {
  const c2 = (0, import_react.useContext)(h), d2 = (0, import_react.useId)(), m2 = f(), v2 = null == m2 ? void 0 : m2.MainButton, p2 = null == m2 ? void 0 : m2.themeParams, P2 = r2 || u2;
  return (0, import_react.useEffect)(() => {
    null == v2 || v2.setParams({ color: i2 || (null == p2 ? void 0 : p2.button_color) || "#fff" });
  }, [i2, p2, v2]), (0, import_react.useEffect)(() => {
    null == v2 || v2.setParams({ text_color: s2 || (null == p2 ? void 0 : p2.button_text_color) || "#000" });
  }, [v2, p2, s2]), (0, import_react.useEffect)(() => {
    null == v2 || v2.setText(n2);
  }, [n2, v2]), (0, import_react.useEffect)(() => {
    P2 ? null == v2 || v2.disable() : P2 || null == v2 || v2.enable();
  }, [P2, v2]), (0, import_react.useEffect)(() => {
    e2 ? null == v2 || v2.showProgress(false) : e2 || null == v2 || v2.hideProgress();
  }, [e2, v2]), (0, import_react.useEffect)(() => {
    if (a2)
      return null == v2 || v2.onClick(a2), () => {
        null == v2 || v2.offClick(a2);
      };
  }, [a2, v2]), w({ show: null == v2 ? void 0 : v2.show, hide: null == v2 ? void 0 : v2.hide, currentShowedIdRef: c2.MainButton, id: d2 }), null;
};
var B = ({ onClick: n2 }) => {
  const e2 = (0, import_react.useContext)(h), r2 = (0, import_react.useId)(), u2 = f(), i2 = null == u2 ? void 0 : u2.BackButton;
  return (0, import_react.useEffect)(() => {
    if (n2 && i2)
      return i2.onClick(n2), () => {
        i2.offClick(n2);
      };
  }, [n2, i2]), w({ show: null == i2 ? void 0 : i2.show, hide: null == i2 ? void 0 : i2.hide, currentShowedIdRef: e2.BackButton, id: r2 }), null;
};
var g = () => {
  const n2 = f();
  return (0, import_react.useCallback)((e2) => new Promise((t2, o2) => {
    try {
      null == n2 || null == n2.showPopup || n2.showPopup(e2, (n3) => {
        t2(n3);
      });
    } catch (n3) {
      o2(n3);
    }
  }), [n2]);
};
var b = () => {
  const n2 = f(), e2 = null == n2 ? void 0 : n2.HapticFeedback;
  return [(0, import_react.useCallback)((...n3) => null == e2 ? void 0 : e2.impactOccurred(...n3), [e2]), (0, import_react.useCallback)((...n3) => null == e2 ? void 0 : e2.notificationOccurred(...n3), [e2]), (0, import_react.useCallback)((...n3) => null == e2 ? void 0 : e2.selectionChanged(...n3), [e2])];
};
var C = () => {
  const n2 = f(), [e2, t2] = (0, import_react.useState)(null == n2 ? void 0 : n2.colorScheme), [l2, r2] = (0, import_react.useState)((null == n2 ? void 0 : n2.themeParams) || {});
  return (0, import_react.useEffect)(() => {
    if (!n2)
      return;
    const e3 = () => {
      t2(n2.colorScheme), r2(n2.themeParams);
    };
    return n2.onEvent("themeChanged", e3), () => {
      n2.offEvent("themeChanged", e3);
    };
  }, [n2]), [e2, l2];
};
var I = () => {
  const n2 = f();
  return [(0, import_react.useCallback)((...e2) => null == n2 || null == n2.showScanQrPopup ? void 0 : n2.showScanQrPopup(...e2), [n2]), (0, import_react.useCallback)(() => null == n2 || null == n2.closeScanQrPopup ? void 0 : n2.closeScanQrPopup(), [n2])];
};
var T = () => {
  const n2 = f();
  return (0, import_react.useCallback)(() => new Promise((e2) => {
    null == n2 || null == n2.readTextFromClipboard || n2.readTextFromClipboard(e2);
  }), [n2]);
};
var k = () => {
  const n2 = f();
  return (0, import_react.useCallback)((...e2) => null == n2 || null == n2.switchInlineQuery ? void 0 : n2.switchInlineQuery(...e2), [n2]);
};
var x = () => {
  const n2 = f(), [e2, t2] = (0, import_react.useState)(null == n2 ? void 0 : n2.isExpanded);
  return (0, import_react.useEffect)(() => {
    if (!n2)
      return;
    const e3 = (e4) => {
      e4.isStateStable && t2(n2.isExpanded);
    };
    return n2.onEvent("viewportChanged", e3), () => n2.offEvent("viewportChanged", e3);
  }, [n2]), [e2, (0, import_react.useCallback)(() => null == n2 || null == n2.expand ? void 0 : n2.expand(), [n2])];
};
var E = () => {
  var n2;
  const e2 = null == (n2 = f()) ? void 0 : n2.CloudStorage, t2 = (0, import_react.useCallback)((n3) => new Promise((t3, o3) => {
    null == e2 || e2.getItem(n3, (n4, e3) => {
      n4 ? o3(n4) : t3(e3);
    });
  }), [e2]), o2 = (0, import_react.useCallback)((n3, t3) => new Promise((o3, l3) => {
    null == e2 || e2.setItem(n3, t3, (n4, e3) => {
      !n4 && e3 ? o3() : l3(n4);
    });
  }), [e2]), l2 = (0, import_react.useCallback)((n3) => new Promise((t3, o3) => {
    null == e2 || e2.getItems(n3, (n4, e3) => {
      !n4 && e3 ? t3(e3) : o3(n4);
    });
  }), [e2]), u2 = (0, import_react.useCallback)((n3) => new Promise((t3, o3) => {
    null == e2 || e2.removeItem(n3, (n4, e3) => {
      !n4 && e3 ? t3() : o3(n4);
    });
  }), [e2]), s2 = (0, import_react.useCallback)((n3) => new Promise((t3, o3) => {
    null == e2 || e2.removeItems(n3, (n4, e3) => {
      !n4 && e3 ? t3() : o3(n4);
    });
  }), [e2]), a2 = (0, import_react.useCallback)(() => new Promise((n3, t3) => {
    null == e2 || e2.getKeys((e3, o3) => {
      !e3 && o3 ? n3(o3) : t3(e3);
    });
  }), [e2]);
  return (0, import_react.useMemo)(() => ({ getItem: t2, setItem: o2, getItems: l2, removeItem: u2, removeItems: s2, getKeys: a2 }), [e2]);
};
function S() {
  return S = Object.assign ? Object.assign.bind() : function(n2) {
    for (var e2 = 1; e2 < arguments.length; e2++) {
      var t2 = arguments[e2];
      for (var o2 in t2)
        Object.prototype.hasOwnProperty.call(t2, o2) && (n2[o2] = t2[o2]);
    }
    return n2;
  }, S.apply(this, arguments);
}
var y = ({ children: e2, options: t2 }) => {
  const l2 = (0, import_react.useMemo)(() => S({}, d, t2), [t2]), r2 = (0, import_react.useMemo)(v, []);
  return (0, import_react.useEffect)(() => {
    if (null == t2 || !t2.smoothButtonsTransition)
      return;
    const n2 = () => {
      var n3, e3;
      null == a || null == (n3 = a.MainButton) || n3.hide(), null == a || null == (e3 = a.BackButton) || e3.hide();
    };
    return window.addEventListener("beforeunload", n2), () => window.removeEventListener("beforeunload", n2);
  }, [null == t2 ? void 0 : t2.smoothButtonsTransition]), import_react.default.createElement(h.Provider, { value: r2 }, import_react.default.createElement(c.Provider, { value: a }, import_react.default.createElement(m.Provider, { value: l2 }, e2)));
};
var M = () => {
  const n2 = f();
  return [n2.initDataUnsafe, n2.initData];
};
var O = () => f();
export {
  B as BackButton,
  P as MainButton,
  y as WebAppProvider,
  E as useCloudStorage,
  x as useExpand,
  b as useHapticFeedback,
  M as useInitData,
  T as useReadTextFromClipboard,
  I as useScanQrPopup,
  g as useShowPopup,
  k as useSwitchInlineQuery,
  C as useThemeParams,
  O as useWebApp
};
//# sourceMappingURL=@vkruglikov_react-telegram-web-app.js.map
